# 计算机网络

## 绪论

### 计算机网络概述

#### 计算机网络的概念

- 网络由若干结点和连接这些结点的链路组成
- 多个计算机网络可以通过路由器互连起来，这样就构成了一个覆盖范围更大的计算机网络，即互连网(internet)
- 互联网/因特网（Internet）是世界上最大的互连网络

#### 计算机网络的组成

计算机网络（这里主要指Internet）可分为边缘部分和核心部分。

- 边缘部分由所有连接到因特网上、供用户直接使用的主机组成，用来进行通信（如传输数据、音频或视频）和资源共享
- 核心部分由大量的网络和连接这些网络的路由器组成，它为边缘部分提供连通性和交换服务

#### 三种交换方式



#### 计算机网络的功能

计算机网络的功能很多，主要有五大功能：数据通信、资源共享、分布式处理、提高可靠性、负载均衡

#### 计算机网络的分类

1. 按覆盖范围分类

   - 广域网(WAN)

     提供长距离通信，覆盖范围通常是直径为几十千米到几千千米的区域，因而有时也称远程网。广域网是因特网的核心部分。连接广域网的各结点交换机的链路一般都是高速链路，具有较大的通信容量。

   - 城域网(MAN)

     覆盖范围可以跨越几个街区甚至整个城市，覆盖区域的直径为5~50km。城域网大多采用以太网技术，因此有时也常并入局域网的范围讨论。

   - 局域网(LAN)

     一般用微机或工作站通过高速线路相连，覆盖范围较小，通常是直径为几十米到几千米的区域。局域网在计算机配置的数量上没有太多的限制，少的可以只有两台，多的可达几百台。传统上，局域网使用广播技术，而广域网使用交换技术。

   - 个人区域网(PAN)

     是指在个人工作的地方将消费电子设备（如平板电脑、智能手机等）用无线技术连接起来的网络，覆盖区域的直径约为10m。

2. 按传输技术分类

   - 广播式网络

     所有联网计算机都共享一个公共通信信道。当一台计算机利用共享通信信道发送报文分组时，所有其他的计算机都会“收听”到这个分组。接受到该分组的计算机将通过检查目的地址来决定是否接受该分组。局域网基本上都采用广播式通信技术，广域网中的无线、卫星通信网络也采用广播式通信技术。

   - 点对点网络

     每条物理链路连接一对计算机。若通信的两台主机之间没有直接连接的线路，则它们之间的分组传输就要通过中间结点进行接收、存储、转发，直至目的结点。

   是否采用分组存储转发与路由选择机制是点对点网络与广播式网络的重要区别，广域网基本都属于点对点网络。

3. 按拓扑结构分类

   - 总线形网络

     用单根传输线把计算机连接起来。优点是建网容易、增删结点方便、节省线路。缺点是重负载时通信效率不高、总线任意一处出现故障则全网瘫痪。

   - 星形网络

     每个终端或计算机都以单独的线路与中央设备相连。中央设备早期是计算机，现在一般是交换机或路由器。优点是便于集中控制和管理，因为端用户之间的通信必须经过中央设备。缺点是成本高、中央设备故障则全网瘫痪。

   - 环形网络

     所有计算机接口设备连接成一个环。环可以是单环，也可以是双环，环中信号是单向传输的。

   - 网状网络

     一般情况下，每个结点至少有两条路径与其他结点相连，多用在广域网中。优点是可靠性高，缺点是控制复杂、线路成本高。

   以上4种基本的网络拓扑结构可以互连为更复杂的网络。

4. 按使用者分类

   - 公用网(Public Network)

     指电信公司出资建造的大型网络。“公用”的意思是指所有愿意按电信公司的规定交纳费用的人都可以使用这种网络。

   - 专用网(Private Network)

     指某个部门为满足本单位特殊业务的需要而建造的网络。这种网络不向本单位以外的人提供服务。

5. 按交换技术分类

   - 电路交换网络

     在源结点与目的结点之间建立一条专用的通路用于传送数据，包括建立连接、传输数据、断开连接三个阶段。最典型的电路交换网是传统电话网络。该类网络的主要特点是整个报文的比特流连续地从源点直达终点，好像是在一条管道中传送。优点是数据直接传送、时延小。缺点是线路利用率低、不能充分利用线路容量、不便于进行差错控制。

   - 报文交换网络

     将数据加上源地址、目的地址、校验码等辅助信息，然后封装成报文。整个报文传送到相邻结点，全部存储后，再转发给下一个结点，重复这一过程直到到达目的结点。这种传输方式称为存储-转发方式。优点是可以较为充分地利用线路容量，可以实现不同链路之间不同数据传输速率的转换，可以实现格式转换，可以实现一对多、多对一的访问，可以实现差错控制。缺点是增大了资源开销（如辅助信息导致处理时间和存储资源的开销），增加了缓冲时延，需要额外的控制机制来保证多个报文的顺序不乱序，缓冲区难以管理（因为报文的大小不确定，接收方在接收到报文之前不能预知报文的大小）。

   - 分组交换网络※

     将数据分成较短的固定长度的数据块，在每个数据块中加上目的地址、源地址、校验码等辅助信息，然后封装成分组（包），以存储-转发方式传输。除具备报文交换网络的优点外，分组交换网络还具有自身的优点：缓冲易于管理；包的平均时延更小，网络占用的平均缓冲区更少；更易于标准化；更适合应用。现在的主流网络基本上都可视为分组交换网络。

6. 按传输介质分类

   - 有线网络
   - 无线网络

#### 计算机网络的标准化工作

#### 计算机网络的性能指标

- 速率(Speed)

  指连接到计算机网络上的主机在数字信道上传送数据的速率，也称数据传输速率、数据率或比特率，单位为比特每秒(b/s, bit/s, bps)。数据率较高时，可用kb/s、Mb/s、Gb/s表示。

- 带宽(Bandwidth)

  原表示通信线路允许通过的信号频带范围，单位是赫兹(Hz)。而在计算机网络中，带宽表示网络的通信线路所能传送数据的能力，是数字信道所能传送的“最高数据传输速率”的同义词，单位是bps

- 吞吐量(Throughput)

  指单位时间内通过某个网络（或信道、接口）的数据量，受网络带宽或网络额定速率的限制

- 时延(Delay)

  指数据（一个报文或分组）从网络（或链路）的一端传送到另一端所需要的总时间，由以下4部分组成：

  - 发送时延 = 数据长度(b) / 发送速率(b/s)
  - 传播时延 = 信道长度(m) / 电磁波传播速率(m/s)（自由空间：3×10^8^m/s，光纤：2×10^8^m/s）
  - 处理时延
  - 排队时延

  对于高速链路，提高的仅是数据发送速率，而非比特在链路上的传播速率，从而减少数据的发送时延。

- 时延带宽积

  是传播时延与信道带宽的乘积，表示发送端发送的第一个比特即将到达终点时，发送端已经发出了多少个比特，因此由称以比特为单位的链路长度。考虑一个代表链路的圆柱形管道，其长度表示链路的传播时延，横截面积表示链路带宽，则时延带宽积表示该管道可以容纳的比特数量。

- 往返时延(Round-Trip Time, RTT)

  指从发送端发出一个分组，到发送端收到来自接收端的确认，总共经历的时延。

- 信道利用率

  指某信道由百分之几的时间是有数据通过的。

- 丢包率

  指在一定的时间范围内，传输过程中丢失的分组数量与总分组数量的比率。丢包的两个主要原因是分组误码和网络拥塞。

### 计算机网络体系结构

#### 计算机网络分层结构

两个系统中实体间的通信是一个很复杂的过程，为了降低协议设计和调试过程的复杂性，也为了便于对网络进行研究、实现和维护，促进标准化工作，通常对计算机网络的体系结构以分层的方式进行建模。

我们把计算机网络的各层及其协议的集合称为网络的体系结构(Architecture)。换言之，计算机网络的体系结构就是这个计算机网络及其所完成的功能的精确定义，它是计算机网络中的层次、各层的协议及层间接口的集合。

分层的基本原则如下：

- 每层都实现一种相对独立的功能，降低大系统的复杂度
- 各层之间界面自然清晰，易于理解，相互交流尽可能少
- 各层功能的精确定义独立于具体的实现方法，可以采用最合适的技术来实现
- 保持下层对上层的独立性，上层单向使用下层提供的服务
- 整个分层结构应能促进标准化工作

#### 常见的计算机网络体系结构

1. OSI体系结构

   国际标准化组织(ISO)提出的网络体系结构。OSI体系结构有7层，自下而上依次为：

   - 物理层
   - 数据链路层
   - 网络层
   - 传输层
   - 会话层
   - 表示层
   - 应用层

2. TCP/IP体系结构

   ARPA在研究ARPAnet时提出了TCP/IP体系结构。TCP/IP由于得到广泛应用而成为事实上的国际标准，自下而上依次为：

   - 网络接口层
   - 网际层
   - 传输层
   - 应用层

   ![image-20231015212510648](https://raw.githubusercontent.com/Cukoo-Li/typora-photos/main/2023/10/upgit_20231015_1697376312.png)

3. TCP/IP与OSI的综合

   无论是OSI还是TCP/IP，都不是完美的。学习计算机网络时，我们往往采取折中的办法，即综合两者的优点，采用一种只有5层协议的体系结构，自下而上依次为：

   - 物理层 - 解决使用何种信号来传输比特的问题
   - 数据链路层 - 解决分组正在一个网络（或一段链路）上传输逇问题
   - 网络层 - 解决分组在多个网络上传输（路由）的问题
   - 运输层 - 解决进程之间基于网络的通信问题
   - 应用层 - 解决通过应用进程的交互来实现特定网络应用的问题

   简单介绍使用通信协议栈进行通信的结点的数据传输过程。每个协议栈的最顶端都是一个面向用户的接口，下面各层是为通信服务的协议。用户传输一个数据报时，通常给出用户能够理解的自然语言，然后通过应用层，将自然语言会转化为用于通信的通信数据。通信数据到达传输层，作为传输层的数据部分（传输层SDU），加上传输层的控制信息（传输层PCI），组成传输层的PDU，然后交到网络层，传输层的PDU下放到网络层后，就成为网络层的SDU，然后加上网络层的PCI，又组成了网络层的PDU，下放到数据链路层，就这样层层下放，层层包裹，最后形成的数据报通过通信线路传输，到达接收方结点协议栈，接收方再逆向地逐层把“包裹”拆开，然后把收到的数据提交给用户。

   ![image-20231015213230200](https://raw.githubusercontent.com/Cukoo-Li/typora-photos/main/2023/10/upgit_20231015_1697376750.png)

#### 计算机网络体系结构中的专用术语

- 实体：任何可发送或接受信息的硬件或软件进程
- 对等实体：同一层的实体
- 协议：控制两个对等实体进行逻辑通信的规则的集合，是水平的
- 协议的三要素
  - 语法：规定了传输数据的格式
  - 语义：规定了所要完成的功能，即需要发出何种控制信息、完成何种动作及做出何种应答
  - 同步：规定了执行各种操作的条件、时序关系等，即事件实现顺序的详细说明
- 服务：下层为紧邻的上层提供的功能调用，是垂直的
- 服务访问点：在同一结点中相邻两层的实体交换信息的逻辑接口，用于区分不同的服务类型
- 服务原语：上层使用下层所提供的服务时必须与下层交换一些命令，这些命令称为服务原语
- 服务数据单元SDU：在同一结点中，层与层之间交换的数据单位
- 协议控制信息PCI：控制协议操作的信息
- 协议数据单元PDU：对等层次之间传送的数据单位称为该层的协议数据单元

在计算机网络体系结构的各个层次中，每个报文都分为两部分：一是数据部分(SDU)；二是控制信息部分(PCI)，它们共同组成PDU。

## 物理层

