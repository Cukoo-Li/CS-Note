# 设计模式

## 单例模式

基于类的静态函数的局部静态变量，实现懒汉版的单例模式：

```cpp
class Singleton {
private:
    Singleton() { std::cout << "Singleton: call Constructor\n"; };

public:
    Singleton(const Singleton &) = delete;
    Singleton &operator=(const Singleton &) = delete;
    
    virtual ~Singleton() { std::cout << "Singleton: call Destructor\n"; }

    static Singleton &get_instance() {
        static Singleton demo;
        return demo;
    }
};
```

事实上，这就是在C++11之后，Effective C++最推荐的单例模式写法。